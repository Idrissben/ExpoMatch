install.packages('foreign')

library(foreign)

install.packages('devtools',dependencies=TRUE)

library(devtools)
install_github("Idrissben/ExpoMatch",force=TRUE)
library(ExpoMatch)

devtools::source_url("https://raw.githubusercontent.com/Idrissben/ExpoMatch/main/R/ExpoMatch_function.R")

# PREPARE LALONDE
lalonde_ctrl <- read.dta("http://www.nber.org/~rdehejia/data/psid_controls.dta")
lalonde_exp <- read.dta("http://www.nber.org/~rdehejia/data/nsw_dw.dta")

lalonde_trt <- lalonde_exp[which(lalonde_exp$treat == 1), ]

lalonde <- rbind(lalonde_trt,lalonde_ctrl)

X <- cbind(lalonde$age, lalonde$re74, lalonde$re75, lalonde$education, lalonde$nodegree, lalonde$married,lalonde$black,lalonde$hispanic)
Tr <- lalonde$treat
Y <- lalonde$re78


set.seed(420)

nm_lalonde = ExpoMatch_function(Tr = Tr, X = X,pop.size = 80, max.generations = 15)
